<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Profile</title>
	

</head>

<body>
<nav class="navbar-color navbar navbar-expand-md navbar-dark ">
	<a class="navbar-brand" href="/home">Memoir</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
		<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarSupportedContent">
		<ul class="navbar-nav mx-auto">

			<li class="nav-item">
				<a class="nav-link" href="/home">Home</a>
			</li>
			<li class="nav-item active">
				<a class="nav-link" href="/profile">Profile</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="/logout">Log out</a>
			</li>



		</ul>

		<form class="form-inline" action="/search" method="POST">
			<input class="form-control mr-sm-2" type="search" name="search" placeholder="Search" aria-label="Search">
			<button class="btn btn-light my-sm-0" type="submit">Search</button>
		</form>

	</div>
</nav>

<!-- profile card -->
<section class="section about-section gray-bg" id="about">
	<div class="container ">
		<div class="row align-items-center flex-row-reverse">
			<div class="col-lg-6">
				<div class="about-text go-to">
					<h3 class="dark-color"><%=user.name%> | @<%=user.userName%></h3>
					<h6 class="theme-color lead"><%=user.bio%></h6>
				   </div>
			</div>
			
			<div class="col-lg-6">
				<div class="about-avatar">
					<img class="profile-img" src="<%=user.image%> " title="" alt="profile-img">
				</div>
			</div>
		</div>
		<div class="counter">
			<div class="row">
				<div class="col-6 col-lg-3">
					<div class=" text-center">
						<h6 class="dark-color count h2" data-to="500" data-speed="500"><%var count=memoirs.reduce(function(n, val) { console.log(val.user._id +" "+ user._id)
							var val=val.user._id.toString();
							var id=user._id.toString();
						  return n + (val.localeCompare(id)==0 );
					  }, 0);%>
					  <%=count%></h6>
						<p class="theme-color m-0px font-w-600">Memoir</p>
					</div>
				</div>
				<div class="col-6 col-lg-3">
					<div class=" text-center">
						<h6 class=" dark-color count h2" data-to="150" data-speed="150"><%=user.followings.length%></h6>
						<a class="font-weight-bold theme-color m-0px font-w-600" href="/following">Following</a>
					</div>
				</div>
				<div class="col-6 col-lg-3">
					<div class=" text-center">
						<h6 class="count h2" data-to="850" data-speed="850"><%=user.followers.length%></h6>
						<a class="font-weight-bold theme-color m-0px font-w-600" href="/followers">Followers</a>
					</div>
				</div>

				<div class="col-6 col-lg-3">
					<div class="count-data text-center ">
						<a class="btnDark btn search-color btn-send " href="/updateProfile">Edit Profile</a>
					</div>
				</div>
				
			</div>
		</div>

	</div>
</section>
<div class="col-md-12 text-center mt-3 mb-3">

	<a href="/newMemoir" class="btnDark btn btn-color btn-lg btn-send pl-5 pr-5">Add A new Memoir</a>
</div>
<!-- end profile card  -->

<% memoirs=memoirs.reverse(); %> 
<%memoirs.forEach(memoir=> {%>

	<% if (user._id==memoir.user.id) { %>
		

<section class="section about-section gray-bg" id="about">
	<div class="container ">

<!-- profile card -->

<div class="cards">
	<!-- for loop here -->

			<div class="blog-post ">
				<div class="blog-post-img">
					<% if(!memoir.image[0]==""){ %> 
					<img src="<%=memoir.image[0]%>" alt="">
					<%} else if(!memoir.image[1]==""){%> 
							<img src="<%=memoir.image[1]%>" alt="">
							<%} else if(!memoir.image[2]==""){%> 
								<img src="<%=memoir.image[2]%>" alt="">
								<%}else if(!memoir.image[3]==""){%> 
									<img src="<%=memoir.image[3]%>" alt="">
									<%}%> 
					
					
				</div>
				<div class="blog-post-info ml-5">
					<div class="blog-post-title">
						<h2><%=memoir.user.name%></h2>
					</div>
					<div class="blog-post-date">
						<span class="theme-color">@<%=memoir.createdAt%></span>
						<!-- <span>Jun 12 2020</span> -->
					</div>
					
					<div class="blog-post-desc">
						<p class="show-less"><%=memoir.text%></p>
					</div>
					<div class="blog-post-read-more">
						<a href="/memoir/<%=memoir._id%>">Read More</a>
					</div>
				</div>
			</div>


			
					<!-- end of foor loop -->
</div>

</div>
</section>

<% } %>
<%})%>
<!-- end profile card  -->
</body>
